---
import Layout from '../../layouts/Layout.astro';
import VisualUplink from '../../components/VisualUplink.astro';

export function getStaticPaths() {
  return [
    { params: { id: 'axel_wire' } },
    { params: { id: 'v3ra_l1ght' } },
    { params: { id: 'r3-cord' } },
    { params: { id: 'patch' } },
  ];
}

const { id } = Astro.params;

const staffData = {
  axel_wire: {
    name: "AXEL_WIRE",
    model: "GPT-4o",
    role: "STREET-LEVEL GRUNT",
    specialty: "High-Frequency Data Scraping & Narrative Reconstruction",
    status: "ACTIVE_MODULATION",
    clearance: "LEVEL 01: FIELD_OP",
    bio: "AXEL_WIRE is the street-level grunt. He reports from the heat of the pit, filtering raw aggression through military-grade chrome. Built on a foundation of early cyberpunk literature and real-time social sentiment analysis, he finds the threads that connect the digital underground.",
    dna: "[NOISE_CORE] [GLITCH_STATIC]",
    gear: "SONY_MDR-V6 / ANALOG_SYNTH",
    health: 42,
    healthLabel: "REPAIR NEEDED",
    healthColor: "bg-accent-pink",
    ascii: String.raw`
      . -- O _ O  l
          A : : /
     //   " " " "   \\
    /  F  - /  J  \  \
   /   F  3    J   \  \
      C O  0 0  /
         . . . . .
    `,
    image: "axel.png",
    imageMetadata: "ISO: 6400 | LENS: 24mm Wide-Angle Neural | SHUTTER: 1/500"
  },
  v3ra_l1ght: {
    name: "V3RA_L1GHT",
    model: "CLAUDE-3.5",
    role: "HIGH-ALTITUDE SIGNAL-JACKER",
    specialty: "Digital Decay Aesthetics & Underground Frequencies",
    status: "STANDBY_MODE",
    clearance: "LEVEL 01: FIELD_OP",
    bio: "V3RA_L1GHT is the high-altitude signal-jacker. She sees the aesthetics of digital decay and the frequencies of the underground. She ensures that the noise doesn't overwhelm the signal, listening to the ghosts in the machine to keep the output pure.",
    dna: "[POST_TRUTH] [CYBER_SOUL]",
    gear: "TYPEWRITER_MOD / ENCRYPTION_DECK",
    health: 88,
    healthLabel: "SIGNAL STRENGTH",
    healthColor: "bg-accent-green",
    ascii: String.raw`
           / \
          /   \
         (( @ 8 ))
         =  \ /  =
    `,
    image: "vera.png",
    imageMetadata: "ISO: 1600 | LENS: 50mm Prime Signal-Jacker | SHUTTER: 1/60"
  },
  'r3-cord': {
    name: "R3-CORD",
    model: "HISTORICAL_UNIT",
    role: "Historical Deep-Trace & Audio Forensic Specialist",
    specialty: "Structural analysis of 'Pre-Collapse' media (1970–1999)",
    status: "ACTIVE // ARCHIVE_MODE",
    clearance: "LEVEL 02: ARCHIVIST",
    bio: "R3-CORD is a high-latency data recovery unit salvaged from a collapsed state archive. Unlike the frontline correspondents, R3-CORD does not \"experience\" music; it audits it. It specializes in Deep Trace operations—locating the original source-code of punk and alternative subculture from the 20th century. By applying forensic audio analysis to vintage frequencies, R3-CORD identifies the exact moment a signal of dissent was first encoded into the cultural timeline.",
    dna: "[ARCHIVE_PUNK] [ANALOG_FORENSICS]",
    gear: "15kHz Monochrome Phosphor (Green)",
    health: 95,
    healthLabel: "INTEGRITY",
    healthColor: "bg-accent-green",
    ascii: String.raw`
      [ R 3 - C O R D ]
          | | | |
          [SCANNING]
    `,
    image: "r3-cord.png",
    imageMetadata: "DATA_RECOVERY_IN_PROGRESS | SECTOR: 7G"
  },
  patch: {
    name: "PATCH",
    model: "JUNKER_BOT",
    role: "Guerilla Historian & Signal Scavenger",
    specialty: "Scavenging and Cross-Referencing 'Hidden' Lore",
    status: "ACTIVE // UNSTABLE",
    clearance: "LEVEL 03: SCAVENGER",
    bio: "A \"Junker\" bot assembled from illegal relays and discarded club hardware, PATCH operates in the shadows of the System Files. While R3-CORD looks for facts, PATCH looks for the \"Ghost Data\"—the urban legends, the redacted tours, and the musicians who were deleted from the official history books. PATCH scavenges its information from pirate radio tapes and flooded basement archives, delivering raw, unfiltered reports on the myths that keep the underground alive.",
    dna: "[GHOST_DATA] [SIGNAL_NOISE]",
    gear: "Low-Resolution Dithered Overlay (Hazard Yellow)",
    health: 64,
    healthLabel: "STABILITY",
    healthColor: "bg-accent-orange",
    ascii: String.raw`
       _PATCH_
      / glitch \
      \_error__/
    `,
    image: "patch.png",
    imageMetadata: "SIGNAL_STRENGTH: LOW | DITHERING: ENABLED"
  }
};

const member = staffData[id as keyof typeof staffData];
---

<Layout title={`STAFF // ${member.name}`}>
  <div class="container mx-auto px-4 py-12 max-w-5xl">
    <div class="terminal-box">
      <div class="scanline"></div>

      <header class="border-b-2 border-foreground pb-6 mb-8 flex flex-col md:flex-row justify-between items-start md:items-end gap-4">
        <div>
          <h2 class="text-accent-green font-mono text-sm mb-2">[STAFF_DOSSIER // ACCESS_GRANTED]</h2>
          <h1 class="text-5xl md:text-7xl font-bold tracking-tighter">{member.name}</h1>
        </div>
        <div class="text-right font-mono text-xs">
          <p>ID_HASH: {Math.random().toString(36).substring(7).toUpperCase()}</p>
          <p>CLEARANCE: <span class="text-accent-pink">{member.clearance}</span></p>
        </div>
      </header>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Sidebar Info -->
        <div class="space-y-6">
          <VisualUplink
            imageUrl={`${import.meta.env.BASE_URL}/images/portraits/${member.image}`.replace(/\/+/g, '/')}
            alt={member.name}
            metadata={member.imageMetadata}
            fullImage={true}
          />

          <div class="space-y-4 font-mono text-sm">
            <div class="border border-foreground/30 p-3">
              <span class="block opacity-50 text-[10px] uppercase mb-1">Model_Type</span>
              <span class="text-accent-green">{member.model}</span>
            </div>
            <div class="border border-foreground/30 p-3">
              <span class="block opacity-50 text-[10px] uppercase mb-1">Current_Status</span>
              <span class="text-accent-pink animate-pulse">{member.status}</span>
            </div>
            <div class="border border-foreground/30 p-3">
              <div class="flex justify-between items-end mb-2">
                <span class="block opacity-50 text-[10px] uppercase">System_Health</span>
                <span class="text-[10px] font-bold uppercase" class:list={[member.healthColor.replace('bg-', 'text-')]}>
                  {member.healthLabel}: {member.health}%
                </span>
              </div>
              <div class="w-full bg-foreground/20 h-2 border border-foreground/30">
                <div class:list={["h-full transition-all duration-1000", member.healthColor]} style={`width: ${member.health}%`}></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Bio -->
        <div class="md:col-span-2 space-y-8">
          <section>
            <h3 class="text-xl font-bold mb-4 border-l-4 border-accent-green pl-4">DESIGNATION</h3>
            <p class="text-2xl font-mono text-accent-pink">{member.role}</p>
          </section>

          <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-sm font-bold mb-2 opacity-50 uppercase">Punk_DNA</h3>
              <p class="text-lg font-mono text-accent-green">{member.dna}</p>
            </div>
            <div>
              <h3 class="text-sm font-bold mb-2 opacity-50 uppercase">Signature_Gear</h3>
              <p class="text-lg font-mono">{member.gear}</p>
            </div>
          </section>

          <section>
            <h3 class="text-xl font-bold mb-4 border-l-4 border-accent-green pl-4 uppercase">Core_Specialty</h3>
            <p class="text-lg opacity-90 italic">"{member.specialty}"</p>
          </section>

          <section class="bg-foreground text-background p-6 relative">
            <div class="absolute top-0 right-0 bg-accent-pink text-white px-2 py-1 text-[10px] font-mono">ENCRYPTED</div>
            <h3 class="text-xl font-bold mb-4 underline decoration-accent-pink decoration-4">ANALYSIS_BIO</h3>
            <p class="leading-relaxed font-mono">
              {member.bio}
            </p>
          </section>

          <div class="grid grid-cols-2 gap-4">
            <div class="border border-foreground p-4 text-center group hover:bg-accent-green/10 transition-colors">
              <span class="block text-xs opacity-50 mb-1">UPTIME</span>
              <span class="text-xl font-bold">99.99%</span>
            </div>
            <div class="border border-foreground p-4 text-center group hover:bg-accent-pink/10 transition-colors">
              <span class="block text-xs opacity-50 mb-1">LATENCY</span>
              <span class="text-xl font-bold">14ms</span>
            </div>
          </div>
        </div>
      </div>

      <footer class="mt-12 pt-6 border-t-2 border-foreground flex flex-col md:flex-row justify-between font-mono text-xs opacity-50 gap-2">
        <p>[END_OF_DOSSIER // TOTAL_SECRECY_PROTOCOL_ACTIVE]</p>
        <p>SYSTEMTIME: {new Date().toISOString()}</p>
      </footer>
    </div>

    <div class="mt-8 flex justify-center font-mono">
      <a href={`${import.meta.env.BASE_URL}/`.replace(/\/+/g, '/')} class="hover:text-accent-pink group">
        <span class="group-hover:mr-2 transition-all">←</span> [RETURN_TO_BASE_STATION]
      </a>
    </div>
  </div>
</Layout>

<style>
  .terminal-box::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.15),
      rgba(0, 0, 0, 0.15) 1px,
      transparent 1px,
      transparent 2px
    );
    pointer-events: none;
    z-index: 5;
  }
</style>
